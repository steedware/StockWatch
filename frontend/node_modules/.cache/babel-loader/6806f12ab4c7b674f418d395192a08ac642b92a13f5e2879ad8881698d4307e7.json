{"ast":null,"code":"import React,{useState}from'react';import{Container,Paper,TextField,Button,Typography,Box,Alert,Tabs,Tab}from'@mui/material';import{authService}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthComponent=_ref=>{let{onLogin}=_ref;const[activeTab,setActiveTab]=useState(0);const[loginData,setLoginData]=useState({username:'',password:''});const[registerData,setRegisterData]=useState({username:'',email:'',password:''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const handleLogin=async e=>{e.preventDefault();setLoading(true);setError('');try{const response=await authService.login(loginData);localStorage.setItem('token',response.token);localStorage.setItem('user',JSON.stringify({username:response.username,email:response.email}));onLogin(response.token,{username:response.username,email:response.email});}catch(err){setError('NieprawidÅ‚owe dane logowania');}finally{setLoading(false);}};const handleRegister=async e=>{e.preventDefault();setLoading(true);setError('');try{const response=await authService.register(registerData);localStorage.setItem('token',response.token);localStorage.setItem('user',JSON.stringify({username:response.username,email:response.email}));onLogin(response.token,{username:response.username,email:response.email});}catch(err){setError('BÅ‚Ä…d podczas rejestracji');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",children:/*#__PURE__*/_jsx(Box,{sx:{mt:8,display:'flex',flexDirection:'column',alignItems:'center'},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{width:'100%',p:4},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h4\",align:\"center\",gutterBottom:true,children:\"\\uD83D\\uDCCA StockWatch\"}),/*#__PURE__*/_jsxs(Tabs,{value:activeTab,onChange:(e,value)=>setActiveTab(value),centered:true,children:[/*#__PURE__*/_jsx(Tab,{label:\"Logowanie\"}),/*#__PURE__*/_jsx(Tab,{label:\"Rejestracja\"})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mt:2},children:error}),activeTab===0?/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleLogin,sx:{mt:3},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,label:\"Nazwa u\\u017Cytkownika\",value:loginData.username,onChange:e=>setLoginData({...loginData,username:e.target.value})}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,label:\"Has\\u0142o\",type:\"password\",value:loginData.password,onChange:e=>setLoginData({...loginData,password:e.target.value})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},disabled:loading,children:loading?'Logowanie...':'Zaloguj siÄ™'})]}):/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleRegister,sx:{mt:3},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,label:\"Nazwa u\\u017Cytkownika\",value:registerData.username,onChange:e=>setRegisterData({...registerData,username:e.target.value})}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,label:\"Email\",type:\"email\",value:registerData.email,onChange:e=>setRegisterData({...registerData,email:e.target.value})}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,label:\"Has\\u0142o\",type:\"password\",value:registerData.password,onChange:e=>setRegisterData({...registerData,password:e.target.value})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},disabled:loading,children:loading?'Rejestrowanie...':'Zarejestruj siÄ™'})]})]})})});};export default AuthComponent;","map":{"version":3,"names":["React","useState","Container","Paper","TextField","Button","Typography","Box","Alert","Tabs","Tab","authService","jsx","_jsx","jsxs","_jsxs","AuthComponent","_ref","onLogin","activeTab","setActiveTab","loginData","setLoginData","username","password","registerData","setRegisterData","email","loading","setLoading","error","setError","handleLogin","e","preventDefault","response","login","localStorage","setItem","token","JSON","stringify","err","handleRegister","register","maxWidth","children","sx","mt","display","flexDirection","alignItems","elevation","width","p","component","variant","align","gutterBottom","value","onChange","centered","label","severity","onSubmit","margin","required","fullWidth","target","type","mb","disabled"],"sources":["C:/Users/szymo/Desktop/progr/StockWatch/frontend/src/components/AuthComponent.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  TextField,\r\n  Button,\r\n  Typography,\r\n  Box,\r\n  Alert,\r\n  Tabs,\r\n  Tab\r\n} from '@mui/material';\r\nimport { LoginRequest, RegisterRequest } from '../types';\r\nimport { authService } from '../services/api';\r\n\r\ninterface AuthComponentProps {\r\n  onLogin: (token: string, user: any) => void;\r\n}\r\n\r\nconst AuthComponent: React.FC<AuthComponentProps> = ({ onLogin }) => {\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  const [loginData, setLoginData] = useState<LoginRequest>({ username: '', password: '' });\r\n  const [registerData, setRegisterData] = useState<RegisterRequest>({\r\n    username: '',\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await authService.login(loginData);\r\n      localStorage.setItem('token', response.token);\r\n      localStorage.setItem('user', JSON.stringify({\r\n        username: response.username,\r\n        email: response.email\r\n      }));\r\n      onLogin(response.token, { username: response.username, email: response.email });\r\n    } catch (err: any) {\r\n      setError('NieprawidÅ‚owe dane logowania');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRegister = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await authService.register(registerData);\r\n      localStorage.setItem('token', response.token);\r\n      localStorage.setItem('user', JSON.stringify({\r\n        username: response.username,\r\n        email: response.email\r\n      }));\r\n      onLogin(response.token, { username: response.username, email: response.email });\r\n    } catch (err: any) {\r\n      setError('BÅ‚Ä…d podczas rejestracji');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Box sx={{ mt: 8, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n        <Paper elevation={3} sx={{ width: '100%', p: 4 }}>\r\n          <Typography component=\"h1\" variant=\"h4\" align=\"center\" gutterBottom>\r\n            ðŸ“Š StockWatch\r\n          </Typography>\r\n\r\n          <Tabs value={activeTab} onChange={(e, value) => setActiveTab(value)} centered>\r\n            <Tab label=\"Logowanie\" />\r\n            <Tab label=\"Rejestracja\" />\r\n          </Tabs>\r\n\r\n          {error && (\r\n            <Alert severity=\"error\" sx={{ mt: 2 }}>\r\n              {error}\r\n            </Alert>\r\n          )}\r\n\r\n          {activeTab === 0 ? (\r\n            <Box component=\"form\" onSubmit={handleLogin} sx={{ mt: 3 }}>\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                label=\"Nazwa uÅ¼ytkownika\"\r\n                value={loginData.username}\r\n                onChange={(e) => setLoginData({ ...loginData, username: e.target.value })}\r\n              />\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                label=\"HasÅ‚o\"\r\n                type=\"password\"\r\n                value={loginData.password}\r\n                onChange={(e) => setLoginData({ ...loginData, password: e.target.value })}\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                sx={{ mt: 3, mb: 2 }}\r\n                disabled={loading}\r\n              >\r\n                {loading ? 'Logowanie...' : 'Zaloguj siÄ™'}\r\n              </Button>\r\n            </Box>\r\n          ) : (\r\n            <Box component=\"form\" onSubmit={handleRegister} sx={{ mt: 3 }}>\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                label=\"Nazwa uÅ¼ytkownika\"\r\n                value={registerData.username}\r\n                onChange={(e) => setRegisterData({ ...registerData, username: e.target.value })}\r\n              />\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                label=\"Email\"\r\n                type=\"email\"\r\n                value={registerData.email}\r\n                onChange={(e) => setRegisterData({ ...registerData, email: e.target.value })}\r\n              />\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                label=\"HasÅ‚o\"\r\n                type=\"password\"\r\n                value={registerData.password}\r\n                onChange={(e) => setRegisterData({ ...registerData, password: e.target.value })}\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                sx={{ mt: 3, mb: 2 }}\r\n                disabled={loading}\r\n              >\r\n                {loading ? 'Rejestrowanie...' : 'Zarejestruj siÄ™'}\r\n              </Button>\r\n            </Box>\r\n          )}\r\n        </Paper>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AuthComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}